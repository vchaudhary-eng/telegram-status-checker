<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Meta Description Scraper</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        textarea { width: 100%; height: 100px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background: #f0f0f0; }
    </style>
</head>
<body>
    <h2>Meta Description Scraper</h2>
    <textarea id="urls" placeholder="Paste one URL per line"></textarea><br><br>
    <button onclick="startScraping()">Start Scraping</button>

    <table id="resultTable">
        <thead>
            <tr>
                <th>URL</th>
                <th>Meta Description</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        async function startScraping() {
            const urls = document.getElementById("urls").value.split("\n").map(u => u.trim()).filter(u => u);
            const tbody = document.querySelector("#resultTable tbody");
            tbody.innerHTML = "";

            for (const url of urls) {
                const formData = new FormData();
                formData.append("url", url);

                try {
                    const res = await fetch("/api/scrape", {
                        method: "POST",
                        body: formData
                    });
                    const data = await res.json();
                    const row = `<tr><td>${data.url}</td><td>${data.description}</td></tr>`;
                    tbody.insertAdjacentHTML("beforeend", row);
                } catch (err) {
                    const row = `<tr><td>${url}</td><td>Error fetching</td></tr>`;
                    tbody.insertAdjacentHTML("beforeend", row);
                }
            }
        }
    </script>
</body>
</html>
